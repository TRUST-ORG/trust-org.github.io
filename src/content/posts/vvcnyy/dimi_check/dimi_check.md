---
title: ì¸ì›ì²´í¬ ë„ìš°ë¯¸ ê°œë°œì¼ì§€
published: 2025-08-27
author: Vvcnyy
description: 'ë‹¤ì‚¬ë‹¤ë‚œí–ˆë˜ ë””ë¯¸ê³  ì¸ì›ì²´í¬ ë„ìš°ë¯¸ ê°œë°œì¼ì§€'
image: './image/end.jpg'
tags: ["DIMIGO", "DIN"]
category: 'Vvcnyy'
draft: false
---



# ì‹œì‘ì€ ë¯¸ì•½í–ˆë‹¤

ì—¬ë¦„ë°©í•™ ì „ì— í•™êµì— ì „ìì¹ íŒì´ ìƒê¸´ë‹¤ëŠ” ì†Œì‹ì„ ë“¤ì—ˆë‹¤.
ì „ìì¹ íŒì„ ì²˜ìŒ ì¨ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆì—ˆë˜ ë‚˜ëŠ” ê·¸ ë¬´ê¶ë¬´ì§„í•œ í™œìš© ê°€ëŠ¥ì„±ì— ëŒ€í•´ì„œ ì˜ ì•Œê³ ìˆì—ˆë‹¤.
ê·¸ë˜ì„œ "ì „ìì¹ íŒì—ì„œ ì¸ì›ì²´í¬ë¥¼ í•´ë³´ëŠ” ê²ƒì´ ì–´ë–¨ê¹Œ" í•˜ëŠ” ìƒê°ì„ í•˜ê²Œë˜ì—ˆë‹¤.

ì´ í”„ë¡œì íŠ¸ëŠ” ì›¹ì‚¬ì´íŠ¸ë¡œ ì§„í–‰í–ˆë‹¤. ì „ìì¹ íŒì— ìì²´ ì›¹ ë¸Œë¼ìš°ì € ê¸°ëŠ¥ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. 
í”„ë¡ íŠ¸ ë° ë°±ì—”ë“œì—ëŠ” `Next.JS`ë¥¼ ì‚¬ìš©í–ˆê³ , ë°ì´í„°ë² ì´ìŠ¤ëŠ” `MongoDB`ë¥¼ ì‚¬ìš©í–ˆë‹¤.
`Next.JS`ì™€ `MongoDB`ë¥¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ë©´ ë³„ë„ì˜ ì„œë²„ ì—†ì´ë„ ì¶©ë¶„íˆ ì„œë¹„ìŠ¤ ìš´ì˜ì´ ê°€ëŠ¥í•˜ë‹¤.

ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê¸° ì „ì—” ë¨¼ì € ì–´ë–¤ ê¸°ëŠ¥ë“¤ì„ ë„£ì„ê²ƒì¸ì§€ì— ëŒ€í•œ `ê¸°ëŠ¥ ëª…ì„¸ì„œ`ë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
ê¸°ëŠ¥ ëª…ì„¸ì„œë¥¼ ì‘ì„±í•˜ê³  ì‹œì‘í•´ì•¼ ê°€ì¥ ì ì ˆí•œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì´í›„ì— í° ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê²Œ ë˜ë©´ ë¶ˆê°€í”¼í•œ ëŒ€ëŒ€ì ì¸ ì½”ë“œ ìˆ˜ì •ì´ í•„ìš”í•´ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ì²˜ìŒì— ë„£ê³ ì í–ˆë˜ ê¸°ëŠ¥ë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.
- Drag&Drop ì¸ì›ì²´í¬
- ì´ì› í‘œì‹œ
- ì‹œê°„ í‘œì‹œ
- ì¼ì • í‘œì‹œ
- ì›ê²© ì¸ì›ì²´í¬

ë°©í•™ ê¸°ê°„ì„ ì´ìš©í•˜ì—¬ í‹ˆí‹ˆíˆ ê°œë°œí–ˆë‹¤.

# í•­ìƒ ìˆœíƒ„í•˜ì§€ëŠ” ì•Šë‹¤

![Image](image/fail.jpg)

ì´ ì‚¬ì§„ì€ 7ì›” 25ì¼, ë°©í•™ì— í•™êµì— ì™€ì„œ ë§Œë“¤ë˜ ì‚¬ì´íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ë˜ ì‚¬ì§„ì´ë‹¤. ë‹¹ì‹œ ë‚˜ëŠ” Tailwind CSSë¥¼ ì‚¬ìš©í•´ì„œ ì‚¬ì´íŠ¸ì˜ CSS ì½”ë“œë¥¼ êµ¬ì„±í•˜ê³  ìˆì—ˆëŠ”ë°, ì´ ëŒ€ë‹¨í•œ ì „ìì¹ íŒì˜ GPUì™€ ë¸Œë¼ìš°ì €ëŠ” Tailwind CSSë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•˜ë‹¤. ì´ ë¬¸ì œëŠ” Tailwind CSSì˜ ëª¨ë“  ìš”ì†Œë¥¼ ëª¨ë‘ ì¼ë°˜ .css íŒŒì¼ë¡œ ë°”ê¾¸ëŠ” ê³¼ì •ì„ í†µí•´ì„œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

# í”„ë¡œì íŠ¸ êµ¬ì„±

í”„ë¡œì íŠ¸ëŠ” í¬ê²Œ ì•„ë˜ì™€ ê°™ì€ êµ¬ì„±ì„ ê°€ì§€ê³  ìˆë‹¤.
```
â”œâ”€api
â”‚  â”œâ”€app
â”‚  â”œâ”€attendance
â”‚  â”‚  â””â”€date
â”‚  â”œâ”€book
â”‚  â”‚  â””â”€reload
â”‚  â”œâ”€class
â”‚  â”‚  â”œâ”€activate
â”‚  â”‚  â””â”€deactivate
â”‚  â”œâ”€regist
â”‚  â”œâ”€schedule
â”‚  â”œâ”€seed
â”‚  â”œâ”€students
â”‚  â”‚  â”œâ”€reset
â”‚  â”‚  â””â”€[id]
â”‚  â”œâ”€tv
â”‚  â””â”€visible-sections
â”‚      â””â”€reload
â”œâ”€book
â”œâ”€teacher
â”‚  â””â”€[id]
â”‚      â”œâ”€book
â”‚      â”œâ”€manifest.json
â”‚      â””â”€old
â””â”€tv
    â””â”€[id]
```
NextJSë¥¼ ì´ìš©í•´ì„œ í•œ í”„ë¡œì íŠ¸ ë‚´ë¶€ì— í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œë¥¼ ëª¨ë‘ ë„£ì—ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë²„ë¦¬ìŠ¤ ê¸°ë°˜ í˜¸ìŠ¤íŒ…ì„ ì§€ì›í•˜ëŠ” `Vercel`í˜¸ìŠ¤íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ì˜€ë‹¤.

`/api`í´ë”ëŠ” í”„ë¡ íŠ¸ì—ì„œ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  APIë¥¼ ì •ì˜í•˜ëŠ” ë””ë ‰í† ë¦¬ì´ë‹¤. ì´ê³³ì—ì„œ `MongoDB API`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜, ìˆ˜ì •í•˜ê¸°ë„ í•˜ê³ , í”„ë¡ íŠ¸ì—”ë“œë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ í•™ìƒ í•¸ë“œí°ê³¼ ì „ìì¹ íŒì— ì§€ì†í•´ì„œ ìˆ˜ì •ëœ ë°ì´í„°ë¥¼ í‘œì‹œí•œë‹¤.

## ì „ìì¹ íŒ ë™ì‘ ì›ë¦¬

ì „ìì¹ íŒì—ì„œ ë°±ì—”ë“œë¡œ 10ì´ˆë§ˆë‹¤ `POST` ìš”ì²­ì„ ë³´ë‚´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. ì´ ê³¼ì •ì—ì„œ ë™ì‹œì— ì „ìì¹ íŒì—ì„œ ìˆ˜ì •ëœ ë°ì´í„°ì˜ DB ìˆ˜ì • ì²˜ë¦¬ ë˜í•œ ì§„í–‰ëœë‹¤. 

ì¼ë°˜ì ì´ë¼ë©´ ìˆ˜ì • ì‹œì—” `PATCH` ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°’ì„ ìˆ˜ì •í•˜ê³ , 10ì´ˆë§ˆë‹¤ ë°ì´í„°ëŠ” `GET` ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì§„í–‰ í•  ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, í•˜ë£¨ 6ì‹œê°„, ì£¼ 5ì¼, 8ê°œ ë°˜ì—ì„œ ì‘ë™ë  API ENDPOINTë¥¼ ê³„ì‚°í•˜ë‹ˆ Vercelì—ì„œ ì œê³µí•˜ëŠ” API ìˆ˜ë¡œëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ì´ ë•Œë¬¸ì— `POST`ìš”ì²­ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì •ê³¼ ìˆ˜ì§‘ì„ ë™ì‹œì— ì§„í–‰í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.

```typescript
export async function POST(req: Request) {
    try {
        const { searchParams } = new URL(req.url);
        const id = searchParams.get('id');
        const grade = searchParams.get('grade');
        const classNum = searchParams.get('class');
        
        console.log(`ğŸ” [DEBUG] GET ìš”ì²­ - ${grade}í•™ë…„ ${classNum}ë°˜`);

        // bodyì—ì„œ ë³€ê²½ì‚¬í•­ ê°€ì ¸ì˜¤ê¸°
        const { updates } = await req.json();

        if (updates && Array.isArray(updates) && updates.length > 0) {
            const db = await getDb();
            
            const bulkOps = updates.map((update: PendingUpdate) => ({
                updateOne: {
                    filter: { 
                        id: update.studentId, 
                        grade, 
                        class: classNum 
                    },
                    update: { 
                        $set: { 
                            location: update.location,
                            ...(update.etcContent && { etcContent: update.etcContent })
                        }
                    }
                }
            }));

            if (bulkOps.length > 0) {
                await db.collection('students').bulkWrite(bulkOps);
            }
            const logEntries = updates.map((update: PendingUpdate) => ({
                action: 'update',
                collection: 'students',
                id: update.studentId,
                grade,
                class: classNum,
                changes: { location: update.location, etcContent: update.etcContent },
                timestamp: new Date(update.timestamp || Date.now()),
            }));
            if (logEntries.length > 0) {
                await db.collection('logs').insertMany(logEntries);
            }
        }

        await processBookReload({ grade, classNum });
        await updateVisibleSections({ grade, classNum });

        // ì—…ë°ì´íŠ¸ëœ ë°ì´í„° ì¡°íšŒ
        const [students, visibleSections] = await Promise.all([
            getStudents({ id, grade, classNum }),
            getVisibleSections({ grade, classNum }),
        ]);

        return NextResponse.json({
            students,
            visibleSections,
        });
    } catch (error) {
        console.error(error);
        return NextResponse.json(
            { error: 'Failed to fetch data' }, 
            { status: 500 }
        );
    }
}
```
ë³´ì•ˆì„ ìƒê°í•œë‹¤ë©´ ì¿ í‚¤ì— ìˆëŠ” JWT í† í° ê²€ì¦ê°™ì€ ê³¼ì •ì´ í•„ìš”í•  ê²ƒì´ë‹¤. ì´ ë¶€ë¶„ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ì¶”í›„ì— ìˆ˜ì •í•  ê³„íšì´ ìˆë‹¤.

## ë””ìì¸

![Image](./image/design.png)

ë””ìì¸ì€ ì–´ë–»ê²Œ í• ê¹Œ ê³ ë¯¼ì´ ë§ì•˜ëŠ”ë°, ì¥ì‹œê°„ í™”ë©´ì— ë„ì›Œë†”ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë‹¤í¬ í…Œë§ˆë¥¼ ë² ì´ìŠ¤ë¡œ ê¸°íší•˜ì˜€ë‹¤.

ìƒë‹¨ë°”ì—ëŠ” ë°” í˜•íƒœì˜ ì¼ì • í‘œì‹œ, ì‹œê°„ í‘œì‹œ, D-Day í‘œì‹œ ë“±ì´ ìˆëŠ”ë°, ì´ëŠ” ë‹¨ì§€ `display: flex`ë¥¼ ì´ìš©í•´ ì¤‘ì•™ì— ì‹œê³„ë¥¼ ë‘ê¸° ìœ„í•œ ì„ íƒì´ì—ˆë‹¤.
ì¦‰, ì›ë˜ D-Day ê¸°ëŠ¥ì€ ì˜ˆì •ì— ì—†ì—ˆë‹¤.

# ì›ê²© ì¸ì›ì²´í¬

ì›ê²© ì‹œìŠ¤í…œì„ ê°œë°œí•  ë•ŒëŠ” ì¸ì¦ ì²˜ë¦¬ë¥¼ ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ê³ ë¯¼ì´ ë§ì•˜ë‹¤.

ëª¨ë‘ì—ê²Œ ëª¨ë‘ì— ëŒ€í•œ ìˆ˜ì • ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ìœ„í—˜í•  ê²ƒ ê°™ì•˜ê³ , ë””ë¯¸ê³  í•™ìƒë“¤ì´ ê³¼ì—° ì´ê³³ì— í…ŒëŸ¬ë¥¼ í•˜ì§€ëŠ” ì•Šì„ê¹Œ? í•˜ëŠ” ìƒê°ë„ ë§ì´ ë“¤ì—ˆë‹¤.

í•˜ì§€ë§Œ, ì¸ì¦ì„ ì¶”ê°€í•˜ëŠ” ìˆœê°„ ì„œë¹„ìŠ¤ì˜ ì ‘ê·¼ì„±ì´ í™• ë–¨ì–´ì§€ê¸° ë•Œë¬¸ì— ì´ë¥¼ ê³¼ê°í•˜ê²Œ í‘œê¸°í•˜ê³  `í•™ë²ˆ + ì´ë¦„` ë°©ì‹ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” ê²ƒì„ ì„ íƒí–ˆë‹¤.

```typescript

export async function PATCH(
  request: NextRequest,
  context: any
) {
  const { id } = await context.params;

  if (!id) {
    return NextResponse.json({ error: 'Missing ID' }, { status: 400 });
  }

  try {
    const db = await getDb();
    const { location, etcContent, grade, class: classNum, itf } = await request.json();

    if (!location || !grade || !classNum) {
      return NextResponse.json({ error: 'Missing location' }, { status: 400 });
    }

    const result = await db.collection('students').updateOne(
      { id, grade, class: classNum },
      {
        $set: {
          location,
          etcContent: (location === 'etc' || location === 'project') ? etcContent : undefined,
          updatedAt: new Date(),
        },
      }
    );
    let visibleSections = await db
        .collection<VisibleSectionDoc>('visible_sections')
        .findOne({ grade, class: classNum });

    if (visibleSections && !visibleSections.visible.includes(location)) {
        const newVisible = [...visibleSections.visible, location];
        await db
        .collection<VisibleSectionDoc>('visible_sections')
        .updateOne(
            { grade, class: classNum },
            { $set: { visible: newVisible } },
            { upsert: true }
        );
    }
    
    await db.collection('logs').insertOne({
      action: 'update',
      collection: 'students',
      id,
      itf,
      grade,
      class: classNum,
      changes: { location, etcContent },
      timestamp: new Date(),
    });

    return NextResponse.json({ ok: true, modifiedCount: result.modifiedCount, location: location });
  } catch (error) {
    console.error('ğŸš¨ PATCH /api/students/[id] error:', error);
    return NextResponse.json({ error: 'Failed to update student' }, { status: 500 });
  }
}
```


# ê°œì¸ì •ë³´

ì˜ ìš´ì˜í•˜ê³  ìˆë˜ ì¤‘ ê°œì¸ì •ë³´ì— ëŒ€í•œ ë¬¸ì œê°€ ì œê¸°ë˜ì—ˆë‹¤. ê°œì¸ì •ë³´ ë³´í˜¸ë²•ì— ì˜ê±°í•˜ë©´ ì—…ë¬´ì˜ ìë™í™”ë¥¼ ìœ„í•œ ê°œì¸ì •ë³´ ìˆ˜ì§‘ì˜ ê²½ìš°ì—ëŠ” ê°œì¸ì •ë³´ ìˆ˜ì§‘ì— ëŒ€í•œ ì‚¬í•­ì„ ëª…ì‹œí•´ì•¼ í•˜ë©°, ë™ì˜ì„œë¥¼ ë°›ì•„ì•¼ í•œë‹¤. ë˜í•œ ê°œì¸ì •ë³´ëŠ” `ê°œì¸ì„ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì •ë³´`ë¥¼ ì˜ë¯¸í•œë‹¤. 

ë‚˜ëŠ” ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê³¼ê°íˆ ëª¨ë“  DBì˜ ì´ë¦„ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ì„œë¥¼ ë§Œë“¤ì–´ ë°°í¬í•˜ì˜€ë‹¤.

# ê²°ë¡ 

![Image](./image/end.jpg)

# ì´í›„ í™œë™

ìš°ì„ ì€ ê°œë°œì€ ì–´ëŠì •ë„ ë§ˆë¬´ë¦¬ ë˜ì—ˆë‹¤. ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ì—ë§Œ ìˆ˜ì •í•  ê³„íšì´ë‹¤.

![Image](./image/dimigoin.jpg)

ì§€ê¸ˆì€ `ë””ë¯¸ê³ ì¸`ì„ ê°œë°œí•´ì•¼í•´ì„œ ë°”ì˜ë‹¤.